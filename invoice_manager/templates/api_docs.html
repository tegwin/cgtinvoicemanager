{% extends "base.html" %}

{% block content %}
<div class="page-header mb-4">
  <h2 class="mb-1">API Documentation</h2>
  <p class="text-muted mb-0">
    Use the REST API to create, update, and pay invoices from other systems.
  </p>
</div>

<div class="card-dark p-3 p-md-4 mb-4">
  <h5 class="mb-3">Authentication</h5>
  <p class="mb-2">
    Include your API key in the <code class="code-chip">X-API-Key</code> header.
  </p>
  <pre class="code-block mb-0"><code>curl -X GET \
  "{{ url_for('api_get_invoice', invoice_id=123, _external=True) }}" \
  -H "X-API-Key: {{ (example_key.key if example_key else 'YOUR_KEY_HERE')[:24] }}..."</code></pre>
</div>

<div class="card-dark p-3 p-md-4 mb-4">
  <h5 class="mb-3">Create invoice (write)</h5>
  <p class="text-muted small mb-2">POST <code class="code-chip">/api/invoices</code></p>
  <pre class="code-block mb-0"><code>{
  "customer": {
    "name": "ACME Ltd",
    "email": "accounts@example.com"
  },
  "issue_date": "2025-01-01",
  "due_date": "2025-01-14",
  "items": [
    {
      "description": "Consulting",
      "quantity": 1,
      "unit_price": 500.00
    }
  ]
}</code></pre>
</div>

<div class="card-dark p-3 p-md-4">
  <h5 class="mb-3">Payment webhook (write)</h5>
  <p class="text-muted small mb-2">
    POST <code class="code-chip">/api/webhooks/payment</code>
  </p>
  <pre class="code-block mb-0"><code>{
  "invoice_number": "INV-20250101-0001",
  "amount": 500.00,
  "payment_date": "2025-01-05",
  "method": "Bank transfer",
  "external_reference": "PAY-123456"
}</code></pre>
</div>
{% endblock %}

